<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="记录岁月。">
<meta property="og:type" content="website">
<meta property="og:title" content="一代人终将老去，总有人正年轻。">
<meta property="og:url" content="http://threebearsdan.github.io/index.html">
<meta property="og:site_name" content="一代人终将老去，总有人正年轻。">
<meta property="og:description" content="记录岁月。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="一代人终将老去，总有人正年轻。">
<meta name="twitter:description" content="记录岁月。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://threebearsdan.github.io/">





  <title>一代人终将老去，总有人正年轻。</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一代人终将老去，总有人正年轻。</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://threebearsdan.github.io/2019/07/03/CGI-FastCGI-php-cgi-php-fpm的理解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cruise">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一代人终将老去，总有人正年轻。">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/03/CGI-FastCGI-php-cgi-php-fpm的理解/" itemprop="url">CGI, FastCGI, php-cgi, php-fpm的理解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-03T11:47:52+08:00">
                2019-07-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="CGI"><a href="#CGI" class="headerlink" title="CGI"></a>CGI</h2><p>CGI是一种协议，CGI是一种协议，CGI是一种协议。</p>
<p>定义了web服务和外部应用之间的交互方式。</p>
<p>外部应用指不同语言编写的CGI脚本。</p>
<p>CGI脚本用来生成动态的页面内容。</p>
<p>CGI进程每次处理请求都要被初始化，处理完之后退出。</p>
<h2 id="FastCGI"><a href="#FastCGI" class="headerlink" title="FastCGI"></a>FastCGI</h2><p>FastCGI是一种协议，FastCGI是一种协议，FastCGI是一种协议。</p>
<p>是对CGI的一种改进。</p>
<p>不需要每次请求处理完程序退出，下次请求来了可以直接复用该进程。</p>
<h2 id="php-cgi"><a href="#php-cgi" class="headerlink" title="php-cgi"></a>php-cgi</h2><p>php-cgi解析cgi协议数据，调用php的php_execute_script函数来解析和运行php文件。</p>
<h2 id="php-fpm"><a href="#php-fpm" class="headerlink" title="php-fpm"></a>php-fpm</h2><p>php-fpm是一个fastcgi进程管理器，类似于连接池，用于管理与web服务器的连接，而fastcgi协议的解析是通过php-fcgi进行解析的，之后将php文件交给php_execute_script函数来执行。</p>
<p>参考：</p>
<p><a href="https://www.basezap.com/difference-php-cgi-php-fpm/" target="_blank" rel="noopener">https://www.basezap.com/difference-php-cgi-php-fpm/</a></p>
<p><a href="https://help.superhosting.bg/en/cgi-common-gateway-interface-fastcgi.html" target="_blank" rel="noopener">https://help.superhosting.bg/en/cgi-common-gateway-interface-fastcgi.html</a></p>
<p><a href="https://www.zhihu.com/question/268732467" target="_blank" rel="noopener">https://www.zhihu.com/question/268732467</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://threebearsdan.github.io/2019/07/03/php基本语法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cruise">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一代人终将老去，总有人正年轻。">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/07/03/php基本语法/" itemprop="url">php基本语法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-07-03T10:14:41+08:00">
                2019-07-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>php脚本以<code>&lt;?php&gt;</code>开始，以<code>&lt;?&gt;</code>结束，可以放在文档中的任何位置。</p>
<ul>
<li><a href="#variable">变量</a></li>
<li><a href="#array">数组</a></li>
<li><a href="#function">函数</a></li>
<li><a href="#control">控制结构</a></li>
<li><a href="#annotation">注释</a></li>
</ul>
<p><span id="variable"><h2>变量</h2></span></p>
<p>规则：</p>
<ul>
<li>变量以$符号开始，后面跟着变量的名称</li>
<li>变量名以不能以数字开头</li>
<li>变量名只能包含数字，字母以及下划线</li>
<li>变量名区分大小写</li>
</ul>
<p>定义变量a</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$a = 10;</span><br></pre></td></tr></table></figure>

<p><span id="array"><h2>数组</h2></span></p>
<p>创建数组<code>person</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 数值数组</span><br><span class="line">$person = array(&quot;student&quot;, &quot;doctor&quot;, &quot;worker&quot;);</span><br><span class="line"></span><br><span class="line">echo $person[0]</span><br><span class="line">echo $person[1]</span><br><span class="line">echo $person[2]</span><br><span class="line"></span><br><span class="line">// 关联数组</span><br><span class="line">$person = array(&quot;student&quot;=&gt;&quot;Cruise&quot;, &quot;doctor&quot;=&gt;&quot;Kobe&quot;, &quot;worker&quot;=&gt;&quot;James&quot;);</span><br><span class="line"></span><br><span class="line">echo $person[&quot;student&quot;];</span><br><span class="line"></span><br><span class="line">// 遍历关联数组</span><br><span class="line">foreach($person as $x=&gt;$x_value)</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;key=&quot; . %x . &quot;, value=&quot; . $x_value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><span id="function">函数</span></p>
<p>定义函数<code>f</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function f() </span><br><span class="line">&#123;</span><br><span class="line">    // code</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>带参数的函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function f($a)</span><br><span class="line">&#123;</span><br><span class="line">    echo $a;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>带有返回值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function f($a, $b)</span><br><span class="line">&#123;</span><br><span class="line">    return $a + $b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><span id="control"><h2>控制结构</h2></span><br>For循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">for ($i = 1; $i &lt;= 5; $i++)</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;The number is &quot; . $i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foreach ($x as $value) </span><br><span class="line">&#123;</span><br><span class="line">  echo $value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>While循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while ($i &lt;= 5)</span><br><span class="line">&#123;</span><br><span class="line">  echo $i;</span><br><span class="line">  $i++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Do while语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">do</span><br><span class="line">&#123;</span><br><span class="line">  echo $i;</span><br><span class="line">  $i++;</span><br><span class="line">&#125; while ($i &lt; 5)</span><br></pre></td></tr></table></figure>

<p>If语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if ($t &lt; 20)</span><br><span class="line">&#123;</span><br><span class="line">  echo &quot;Have a good day&quot;;</span><br><span class="line">&#125; elseif &#123;</span><br><span class="line">  echo &quot;Have a bad day&quot;;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  echo &quot;Boom&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Switch语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">switch ($n) </span><br><span class="line">&#123;</span><br><span class="line">case &quot;red&quot;:</span><br><span class="line">    echo &quot;red&quot;;</span><br><span class="line">    break;</span><br><span class="line">case &quot;blue&quot;:</span><br><span class="line">    echo &quot;blue&quot;;</span><br><span class="line">    break;</span><br><span class="line">default:</span><br><span class="line">    echo &quot;default&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><span id="annotation"><h2>注释</h2></span><br>行注释：<code>//</code>, <code>#</code><br>块注释：<code>/* */</code></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://threebearsdan.github.io/2019/06/28/链接的接口——符号/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cruise">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一代人终将老去，总有人正年轻。">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/28/链接的接口——符号/" itemprop="url">链接的接口——符号</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-28T18:55:10+08:00">
                2019-06-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>链接的本质就是将多个目标文件拼接到一起形成可执行文件。为了使不同的目标文件之间能够拼接，必须有一定的规则才行，就像协议一样。在链接中，目标文件之前的相互拼接实际上是目标文件之间对地址的引用，即对函数和变量的地址的引用。比如目标文件B用到了目标文件A中的函数<code>foo</code>，就称目标文件A定义了函数<code>foo</code>，目标文件B引用了目标文件A中的函数<code>foo</code>。在链接中，我们将函数和变量统称为符号，函数名或变量名就是符号名。</p>
<p>整个链接的过程正是基于符号才能够正确完成。链接过程中很关键的一部分就是符号管理，每一个目标文件都会有一个相应的符号表，这个表里记录了目标文件中所用到的所有符号。每个定义的符号有一个对应的值，叫做符号值，对于变量和函数来说，符号值就是他们的地址。</p>
<p>符号表中的分类：</p>
<ul>
<li>定义在本目标文件中的全局符号，可以被其他目标文件引用。</li>
<li>在本目标文件中引用的全局符号，却没有定义在本目标文件。</li>
<li>段名，这种符号往往由编译器产生，它的值就是该段的起始地址。</li>
<li>局部符号，这类符号只在编译单元内部可见。这些局部符号对于链接过程没有作用，链接器往往忽略它们。</li>
<li>行号信息，即目标文件指令与源代码中代码行的对应关系，它也是可选的。</li>
</ul>
<p>对于我们来说，最值得关注的就是全局符号，即上面分类中的第一类和第二类。因为链接过程只关心全局符号相互黏合，局部符号、段名、行号都是次要的，它们对于其他目标文件来说是不可见的，在链接过程中也是无关紧要的。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://threebearsdan.github.io/2019/06/27/魔数的由来/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cruise">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一代人终将老去，总有人正年轻。">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/27/魔数的由来/" itemprop="url">魔数的由来</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-27T19:28:20+08:00">
                2019-06-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><code>a.out</code>格式的魔数为<code>0x01</code>、<code>0x07</code>，为什么会规定这个魔数呢？</p>
<p><code>Unix</code>早年是在<code>PDP</code>小型机上诞生的，当时的系统在加载一个可执行文件后直接从文件的第一个字节开始执行，人们一般在文件的最开始位置放一条跳转（<code>jump</code>）指令，这条指令负责跳过接下来的7个机器字的头文件到可执行文件的真正入口。而<code>0x01</code> <code>0x07</code>这两个字节刚好是当时<code>PDP-11</code>的机器的跳转7个机器字的指令。为了跟以前的系统保持兼容性，这条跳转指令被当作魔数一直保留到了几十年后的今天。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://threebearsdan.github.io/2019/06/27/BSS段不占磁盘空间的理解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cruise">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一代人终将老去，总有人正年轻。">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/27/BSS段不占磁盘空间的理解/" itemprop="url">BSS段不占磁盘空间的理解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-27T11:17:39+08:00">
                2019-06-27
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="BSS段存放两种变量类型："><a href="#BSS段存放两种变量类型：" class="headerlink" title="BSS段存放两种变量类型："></a>BSS段存放两种变量类型：</h4><ul>
<li>未初始化全局变量</li>
<li>未初始化局部静态变量</li>
</ul>
<h4 id="如何证明BSS段不占磁盘空间？"><a href="#如何证明BSS段不占磁盘空间？" class="headerlink" title="如何证明BSS段不占磁盘空间？"></a>如何证明BSS段不占磁盘空间？</h4><ul>
<li><p>其他各段数据不变，单纯增加BSS段存放的变量，观察ELF文件大小的变化</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt; echo &apos;int global[1024]; int main() &#123; return 0; &#125;&apos; &gt; test.c</span><br><span class="line">&gt; gcc test.c -o test</span><br><span class="line">&gt; ls -rtl test</span><br><span class="line">----------------</span><br><span class="line">-rwxrwxr-x 1 cruise cruise 4569 6月  26 23:21 test</span><br><span class="line">----------------</span><br><span class="line"></span><br><span class="line">&gt; size test</span><br><span class="line">----------------</span><br><span class="line">text	   data	    bss	    dec	    hex	filename</span><br><span class="line"> 960	    248	   4128	   5336	   14d8	test</span><br><span class="line">----------------</span><br><span class="line"></span><br><span class="line">// 将global大小扩大一倍</span><br><span class="line">&gt; echo &apos;int global[2048]; int main() &#123; return 0; &#125;&apos; &gt; test.c</span><br><span class="line">&gt; gcc test.c -o test</span><br><span class="line">&gt; ls -rtl test</span><br><span class="line">---------------</span><br><span class="line">-rwxrwxr-x 1 cruise cruise 4569 6月  26 23:25 test</span><br><span class="line">---------------</span><br><span class="line">  </span><br><span class="line">&gt; size test</span><br><span class="line">--------------</span><br><span class="line">text	   data	    bss	    dec	    hex	filename</span><br><span class="line"> 960	    248	   8224	   9432	   24d8	test</span><br><span class="line">--------------</span><br></pre></td></tr></table></figure>

<p> 将global数组的大小增加一倍的时候，文件的大小仍然不变。</p>
</li>
<li><p>对BSS段中的变量进行初始化，变量将被存放在数据段，观察ELF文件大小的变化</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt; echo &apos;int global[1024]; int main() &#123; return 0; &#125;&apos; &gt; test.c</span><br><span class="line">&gt; gcc test.c -o test</span><br><span class="line">&gt; ls -rtl test</span><br><span class="line">----------------</span><br><span class="line">-rwxrwxr-x 1 cruise cruise 4569 6月  26 23:21 test</span><br><span class="line">----------------</span><br><span class="line"></span><br><span class="line">&gt; size test</span><br><span class="line">----------------</span><br><span class="line">text	   data	    bss	    dec	    hex	filename</span><br><span class="line"> 960	    248	   4128	   5336	   14d8	test</span><br><span class="line">----------------</span><br><span class="line"></span><br><span class="line">// 将对global进行初始化</span><br><span class="line">&gt; echo &apos;int global[1024] = &#123;1&#125;; int main() &#123; return 0; &#125;&apos; &gt; test.c</span><br><span class="line">&gt; gcc test.c -o test</span><br><span class="line">&gt; ls -rtl test</span><br><span class="line">----------------</span><br><span class="line">-rwxrwxr-x 1 cruise cruise 8701 6月  26 23:39 test</span><br><span class="line">----------------</span><br><span class="line"></span><br><span class="line">&gt; size test</span><br><span class="line">----------------</span><br><span class="line">text	   data	    bss	    dec	    hex	filename</span><br><span class="line"> 960	   4372	      8	   5340	   14dc	test</span><br><span class="line">----------------</span><br></pre></td></tr></table></figure>

<p> 将global进行初始化之后，ELF文件增大将近一倍。而如果BSS段占用磁盘空间的话，大小不变才对。</p>
</li>
</ul>
<p>通过上面两个实验可以证明，BSS段实际是不占用磁盘空间的，只在段表中记录大小，在符号表中记录符号。当文件装载运行时，才会分配空间以及初始化。</p>
<h4 id="BSS历史"><a href="#BSS历史" class="headerlink" title="BSS历史"></a>BSS历史</h4><p><strong>BSS（Block Started by Symbol）</strong>这个词最初是UA-SAP汇编器（United Aircraft Symbolic Assembly Program)中的一个伪指令，用于为符号预留一块内存空间。该汇编起由美国联合航空公司于20世纪50年代中期为IBM 704大型机所开发。</p>
<p>后来BSS这个词被作为关键子引入到IBM 709和7090/94机器上的汇编器FAP(Fortran Assembly Program)，用于定义符号并且为该符号预留给定数量的未初始化空间。</p>
<p>Unix FAQ session 1.3( <a href="http://www.faqs.org/faqs/unix-faq/faq/part1/section-3.html)里面有Unix和C语言之父Dennis" target="_blank" rel="noopener">http://www.faqs.org/faqs/unix-faq/faq/part1/section-3.html)里面有Unix和C语言之父Dennis</a> Rithcie对BSS这个词由来的解释。</p>
<pre><code>-- 摘自《程序员的自我修养——链接、装载与库》</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://threebearsdan.github.io/2019/06/26/objdump/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cruise">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一代人终将老去，总有人正年轻。">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/26/objdump/" itemprop="url">objdump</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-26T18:58:15+08:00">
                2019-06-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="objdump命令"><a href="#objdump命令" class="headerlink" title="objdump命令"></a>objdump命令</h2><p><strong>显示目标文件的信息</strong></p>
<p>选项</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Usage: objdump &lt;option(s)&gt; &lt;file(s)&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-a </span><br><span class="line">--archive-headers</span><br><span class="line">显示静态库文件的头信息，包含组成静态库的目标文件</span><br><span class="line"></span><br><span class="line">&gt; objdump -a test.a</span><br><span class="line">----------------</span><br><span class="line">In archive libtest.a:</span><br><span class="line"></span><br><span class="line">a.o:     file format elf32-i386</span><br><span class="line">rw-rw-r-- 500/501    812 Jun 25 22:42 2019 a.o</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">b.o:     file format elf32-i386</span><br><span class="line">rw-rw-r-- 500/501    753 Jun 25 22:44 2019 b.o</span><br><span class="line">-----------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-f</span><br><span class="line">--file-headers</span><br><span class="line">文件头，描述整个文件的文件属性，包括是否可执行、是否重定向、是静态链接还是动态链接以及入口地址（如果是可执行文件）、目标硬件、目标操作系统等信息</span><br><span class="line"></span><br><span class="line">&gt; objdump -f test.o</span><br><span class="line">------------------</span><br><span class="line">test.o:     file format elf32-i386</span><br><span class="line">architecture: i386, flags 0x00000011:</span><br><span class="line">HAS_RELOC, HAS_SYMS</span><br><span class="line">start address 0x00000000</span><br><span class="line">------------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-p</span><br><span class="line">--private-headers</span><br><span class="line">显示目标文件格式详细的信息，与目标文件格式相关。对于某些目标文件格式，没有额外的信息被打印。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">-h</span><br><span class="line">--[section-]headers  </span><br><span class="line">显示各个段的头部摘要信息</span><br><span class="line"></span><br><span class="line">&gt; objdump -h test.o</span><br><span class="line">------------------</span><br><span class="line">test.o:     file format elf32-i386</span><br><span class="line"></span><br><span class="line">Sections:</span><br><span class="line">Idx Name          Size      VMA       LMA       File off  Algn</span><br><span class="line">  0 .text         00000027  00000000  00000000  00000034  2**2</span><br><span class="line">                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE</span><br><span class="line">  1 .data         00000000  00000000  00000000  0000005c  2**2</span><br><span class="line">                  CONTENTS, ALLOC, LOAD, DATA</span><br><span class="line">  2 .bss          00000000  00000000  00000000  0000005c  2**2</span><br><span class="line">                  ALLOC</span><br><span class="line">  3 .comment      0000002e  00000000  00000000  0000005c  2**0</span><br><span class="line">                  CONTENTS, READONLY</span><br><span class="line">  4 .note.GNU-stack 00000000  00000000  00000000  0000008a  2**0</span><br><span class="line">                  CONTENTS, READONLY</span><br><span class="line">-----------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">-x</span><br><span class="line">--all-headers</span><br><span class="line">显示所有可用的头部信息，包括符号表和重定位入口</span><br><span class="line"></span><br><span class="line">&gt; objdump -x test.o</span><br><span class="line">-----------------</span><br><span class="line">test.o:     file format elf32-i386</span><br><span class="line">test.o</span><br><span class="line">architecture: i386, flags 0x00000011:</span><br><span class="line">HAS_RELOC, HAS_SYMS</span><br><span class="line">start address 0x00000000</span><br><span class="line"></span><br><span class="line">Sections:</span><br><span class="line">Idx Name          Size      VMA       LMA       File off  Algn</span><br><span class="line">  0 .text         00000027  00000000  00000000  00000034  2**2</span><br><span class="line">                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, CODE</span><br><span class="line">  1 .data         00000000  00000000  00000000  0000005c  2**2</span><br><span class="line">                  CONTENTS, ALLOC, LOAD, DATA</span><br><span class="line">  2 .bss          00000000  00000000  00000000  0000005c  2**2</span><br><span class="line">                  ALLOC</span><br><span class="line">  3 .comment      0000002e  00000000  00000000  0000005c  2**0</span><br><span class="line">                  CONTENTS, READONLY</span><br><span class="line">  4 .note.GNU-stack 00000000  00000000  00000000  0000008a  2**0</span><br><span class="line">                  CONTENTS, READONLY</span><br><span class="line">SYMBOL TABLE:</span><br><span class="line">00000000 l    df *ABS*	00000000 a.c</span><br><span class="line">00000000 l    d  .text	00000000 .text</span><br><span class="line">00000000 l    d  .data	00000000 .data</span><br><span class="line">00000000 l    d  .bss	00000000 .bss</span><br><span class="line">00000000 l    d  .note.GNU-stack	00000000 .note.GNU-stack</span><br><span class="line">00000000 l    d  .comment	00000000 .comment</span><br><span class="line">00000000 g     F .text	00000027 main</span><br><span class="line">00000000         *UND*	00000000 shared</span><br><span class="line">00000000         *UND*	00000000 swap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RELOCATION RECORDS FOR [.text]:</span><br><span class="line">OFFSET   TYPE              VALUE</span><br><span class="line">00000015 R_386_32          shared</span><br><span class="line">00000021 R_386_PC32        swap</span><br><span class="line">--------------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-d</span><br><span class="line">--disassemble</span><br><span class="line">反汇编可执行段</span><br><span class="line"></span><br><span class="line">&gt; objdump -d test.o</span><br><span class="line">-------------------</span><br><span class="line">test.o:     file format elf32-i386</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">00000000 &lt;main&gt;:</span><br><span class="line">   0:	55                   	push   %ebp</span><br><span class="line">   1:	89 e5                	mov    %esp,%ebp</span><br><span class="line">   3:	83 e4 f0             	and    $0xfffffff0,%esp</span><br><span class="line">   6:	83 ec 20             	sub    $0x20,%esp</span><br><span class="line">   9:	c7 44 24 1c 64 00 00 	movl   $0x64,0x1c(%esp)</span><br><span class="line">  10:	00</span><br><span class="line">  11:	c7 44 24 04 00 00 00 	movl   $0x0,0x4(%esp)</span><br><span class="line">  18:	00</span><br><span class="line">  19:	8d 44 24 1c          	lea    0x1c(%esp),%eax</span><br><span class="line">  1d:	89 04 24             	mov    %eax,(%esp)</span><br><span class="line">  20:	e8 fc ff ff ff       	call   21 &lt;main+0x21&gt;</span><br><span class="line">  25:	c9                   	leave</span><br><span class="line">  26:	c3                   	ret</span><br><span class="line">------------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">-D</span><br><span class="line">--disassemble-all</span><br><span class="line">反汇编所有段</span><br><span class="line"></span><br><span class="line">&gt; objdump -D test.o</span><br><span class="line">test.o:     file format elf32-i386</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">00000000 &lt;main&gt;:</span><br><span class="line">   0:	55                   	push   %ebp</span><br><span class="line">   1:	89 e5                	mov    %esp,%ebp</span><br><span class="line">   3:	83 e4 f0             	and    $0xfffffff0,%esp</span><br><span class="line">   6:	83 ec 20             	sub    $0x20,%esp</span><br><span class="line">   9:	c7 44 24 1c 64 00 00 	movl   $0x64,0x1c(%esp)</span><br><span class="line">  10:	00</span><br><span class="line">  11:	c7 44 24 04 00 00 00 	movl   $0x0,0x4(%esp)</span><br><span class="line">  18:	00</span><br><span class="line">  19:	8d 44 24 1c          	lea    0x1c(%esp),%eax</span><br><span class="line">  1d:	89 04 24             	mov    %eax,(%esp)</span><br><span class="line">  20:	e8 fc ff ff ff       	call   21 &lt;main+0x21&gt;</span><br><span class="line">  25:	c9                   	leave</span><br><span class="line">  26:	c3                   	ret</span><br><span class="line"></span><br><span class="line">Disassembly of section .comment:</span><br><span class="line"></span><br><span class="line">00000000 &lt;.comment&gt;:</span><br><span class="line">   0:	00 47 43             	add    %al,0x43(%edi)</span><br><span class="line">   3:	43                   	inc    %ebx</span><br><span class="line">   4:	3a 20                	cmp    (%eax),%ah</span><br><span class="line">   6:	28 47 4e             	sub    %al,0x4e(%edi)</span><br><span class="line">   9:	55                   	push   %ebp</span><br><span class="line">   a:	29 20                	sub    %esp,(%eax)</span><br><span class="line">   c:	34 2e                	xor    $0x2e,%al</span><br><span class="line">   e:	34 2e                	xor    $0x2e,%al</span><br><span class="line">  10:	37                   	aaa</span><br><span class="line">  11:	20 32                	and    %dh,(%edx)</span><br><span class="line">  13:	30 31                	xor    %dh,(%ecx)</span><br><span class="line">  15:	32 30                	xor    (%eax),%dh</span><br><span class="line">  17:	33 31                	xor    (%ecx),%esi</span><br><span class="line">  19:	33 20                	xor    (%eax),%esp</span><br><span class="line">  1b:	28 52 65             	sub    %dl,0x65(%edx)</span><br><span class="line">  1e:	64 20 48 61          	and    %cl,%fs:0x61(%eax)</span><br><span class="line">  22:	74 20                	je     44 &lt;main+0x44&gt;</span><br><span class="line">  24:	34 2e                	xor    $0x2e,%al</span><br><span class="line">  26:	34 2e                	xor    $0x2e,%al</span><br><span class="line">  28:	37                   	aaa</span><br><span class="line">  29:	2d 32 33 29 00       	sub    $0x293332,%eax</span><br><span class="line">  ------------------</span><br></pre></td></tr></table></figure>

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">  -S</span><br><span class="line">  --source</span><br><span class="line">  同时显示汇编代码和源码，编译时指定-g选项时</span><br><span class="line"></span><br><span class="line">  &gt; objdump -S test.o</span><br><span class="line">  ------------------</span><br><span class="line">  test.o:     file format elf32-i386</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disassembly of section .text:</span><br><span class="line"></span><br><span class="line">00000000 &lt;main&gt;:</span><br><span class="line">/* a.c */</span><br><span class="line">extern int shared;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">   0:	55                   	push   %ebp</span><br><span class="line">   1:	89 e5                	mov    %esp,%ebp</span><br><span class="line">   3:	83 e4 f0             	and    $0xfffffff0,%esp</span><br><span class="line">   6:	83 ec 20             	sub    $0x20,%esp</span><br><span class="line">    int a = 100;</span><br><span class="line">   9:	c7 44 24 1c 64 00 00 	movl   $0x64,0x1c(%esp)</span><br><span class="line">  10:	00</span><br><span class="line">    swap( &amp;a, &amp;shared );</span><br><span class="line">  11:	c7 44 24 04 00 00 00 	movl   $0x0,0x4(%esp)</span><br><span class="line">  18:	00</span><br><span class="line">  19:	8d 44 24 1c          	lea    0x1c(%esp),%eax</span><br><span class="line">  1d:	89 04 24             	mov    %eax,(%esp)</span><br><span class="line">  20:	e8 fc ff ff ff       	call   21 &lt;main+0x21&gt;</span><br><span class="line">&#125;</span><br><span class="line">  25:	c9                   	leave</span><br><span class="line">  26:	c3                   	ret</span><br><span class="line">  ------------------</span><br></pre></td></tr></table></figure>

  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">  -s</span><br><span class="line">  --full-contents</span><br><span class="line">  显示所有段的详细内容</span><br><span class="line"></span><br><span class="line">  &gt; objdump -s test.o</span><br><span class="line">  ------------------</span><br><span class="line">  test.o:     file format elf32-i386</span><br><span class="line"></span><br><span class="line">Contents of section .text:</span><br><span class="line"> 0000 5589e583 e4f083ec 20c74424 1c640000  U....... .D$.d..</span><br><span class="line"> 0010 00c74424 04000000 008d4424 1c890424  ..D$......D$...$</span><br><span class="line"> 0020 e8fcffff ffc9c3                      .......</span><br><span class="line">Contents of section .debug_abbrev:</span><br><span class="line"> 0000 01110125 0e130b03 081b0e11 01120110  ...%............</span><br><span class="line"> 0010 06000002 2e013f0c 030e3a0b 3b0b4913  ......?...:.;.I.</span><br><span class="line"> 0020 11011201 400a0113 00000334 0003083a  ....@......4...:</span><br><span class="line"> 0030 0b3b0b49 13020a00 00042e01 3f0c030e  .;.I........?...</span><br><span class="line"> 0040 3a0b3b0b 49133c0c 00000518 00000006  :.;.I.&lt;.........</span><br><span class="line"> 0050 24000b0b 3e0b0308 00000734 00030e3a  $...&gt;......4...:</span><br><span class="line"> 0060 0b3b0b49 133f0c3c 0c000000           .;.I.?.&lt;....</span><br><span class="line">Contents of section .debug_info:</span><br><span class="line"> 0000 79000000 03000000 00000401 00000000  y...............</span><br><span class="line"> 0010 01612e63 00390000 00000000 00270000  .a.c.9.......&apos;..</span><br><span class="line"> 0020 00000000 00020134 00000001 045b0000  .......4.....[..</span><br><span class="line"> 0030 00000000 00270000 00019c5b 00000003  .....&apos;.....[....</span><br><span class="line"> 0040 61000106 5b000000 02741c04 012f0000  a...[....t.../..</span><br><span class="line"> 0050 0001075b 00000001 05000006 0405696e  ...[..........in</span><br><span class="line"> 0060 74000728 00000001 025b0000 00010107  t..(.....[......</span><br><span class="line"> 0070 28000000 01025b00 00000101 00        (.....[......</span><br><span class="line">Contents of section .debug_line:</span><br><span class="line"> 0000 31000000 02001a00 00000101 fb0e0d00  1...............</span><br><span class="line"> 0010 01010101 00000001 00000100 612e6300  ............a.c.</span><br><span class="line"> 0020 00000000 00050200 00000016 9183083d  ...............=</span><br><span class="line"> 0030 02020001 01                          .....</span><br><span class="line">Contents of section .debug_pubnames:</span><br><span class="line"> 0000 17000000 02000000 00007d00 00002500  ..........&#125;...%.</span><br><span class="line"> 0010 00006d61 696e0000 000000             ..main.....</span><br><span class="line">Contents of section .debug_aranges:</span><br><span class="line"> 0000 1c000000 02000000 00000400 00000000  ................</span><br><span class="line"> 0010 00000000 27000000 00000000 00000000  ....&apos;...........</span><br><span class="line">Contents of section .debug_str:</span><br><span class="line"> 0000 474e5520 4320342e 342e3720 32303132  GNU C 4.4.7 2012</span><br><span class="line"> 0010 30333133 20285265 64204861 7420342e  0313 (Red Hat 4.</span><br><span class="line"> 0020 342e372d 32332900 73686172 65640073  4.7-23).shared.s</span><br><span class="line"> 0030 77617000 6d61696e 002f686f 6d652f63  wap.main./home/c</span><br><span class="line"> 0040 72756973 652f636c 616e6700           ruise/clang.</span><br><span class="line">Contents of section .comment:</span><br><span class="line"> 0000 00474343 3a202847 4e552920 342e342e  .GCC: (GNU) 4.4.</span><br><span class="line"> 0010 37203230 31323033 31332028 52656420  7 20120313 (Red</span><br><span class="line"> 0020 48617420 342e342e 372d3233 2900      Hat 4.4.7-23).</span><br><span class="line">Contents of section .debug_frame:</span><br><span class="line"> 0000 10000000 ffffffff 0100017c 080c0404  ...........|....</span><br><span class="line"> 0010 88010000 1c000000 00000000 00000000  ................</span><br><span class="line"> 0020 27000000 410e0885 02420d05 63c50c04  &apos;...A....B..c...</span><br><span class="line"> 0030 04000000                             ....</span><br><span class="line"> ----------------</span><br></pre></td></tr></table></figure>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-g</span><br><span class="line">--debugging</span><br><span class="line">显示调试信息</span><br></pre></td></tr></table></figure>

 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-e</span><br><span class="line">--debugging-tags</span><br><span class="line">类似与-g选项，生成的是和ctags工具相兼容的信息</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-G</span><br><span class="line">--stabs</span><br><span class="line">显示文件中任何STABS信息</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-t</span><br><span class="line">--syms</span><br><span class="line">显示符号表的内容</span><br><span class="line"></span><br><span class="line">&gt; objdump -t test.o</span><br><span class="line">---------------------</span><br><span class="line">test.o:     file format elf32-i386</span><br><span class="line"></span><br><span class="line">SYMBOL TABLE:</span><br><span class="line">00000000 l    df *ABS*	00000000 a.c</span><br><span class="line">00000000 l    d  .text	00000000 .text</span><br><span class="line">00000000 l    d  .data	00000000 .data</span><br><span class="line">00000000 l    d  .bss	00000000 .bss</span><br><span class="line">00000000 l    d  .debug_abbrev	00000000 .debug_abbrev</span><br><span class="line">00000000 l    d  .debug_info	00000000 .debug_info</span><br><span class="line">00000000 l    d  .debug_line	00000000 .debug_line</span><br><span class="line">00000000 l    d  .debug_pubnames	00000000 .debug_pubnames</span><br><span class="line">00000000 l    d  .debug_aranges	00000000 .debug_aranges</span><br><span class="line">00000000 l    d  .debug_str	00000000 .debug_str</span><br><span class="line">00000000 l    d  .note.GNU-stack	00000000 .note.GNU-stack</span><br><span class="line">00000000 l    d  .debug_frame	00000000 .debug_frame</span><br><span class="line">00000000 l    d  .comment	00000000 .comment</span><br><span class="line">00000000 g     F .text	00000027 main</span><br><span class="line">00000000         *UND*	00000000 shared</span><br><span class="line">00000000         *UND*	00000000 swap</span><br><span class="line">---------------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-T</span><br><span class="line">--dynamic-syms</span><br><span class="line">显示动态符号表的内容</span><br><span class="line"></span><br><span class="line">&gt; objdump -T test.o</span><br><span class="line">----------------------</span><br><span class="line">test.o:     file format elf32-i386</span><br><span class="line"></span><br><span class="line">objdump: test.o: not a dynamic object</span><br><span class="line">DYNAMIC SYMBOL TABLE:</span><br><span class="line">no symbols</span><br><span class="line">----------------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">-r</span><br><span class="line">--reloc</span><br><span class="line">显示重定位的入口，可以和-d, -D 配合使用</span><br><span class="line"></span><br><span class="line">&gt; objdump -r test.o</span><br><span class="line">----------------------</span><br><span class="line">test.o:     file format elf32-i386</span><br><span class="line"></span><br><span class="line">RELOCATION RECORDS FOR [.text]:</span><br><span class="line">OFFSET   TYPE              VALUE</span><br><span class="line">00000015 R_386_32          shared</span><br><span class="line">00000021 R_386_PC32        swap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RELOCATION RECORDS FOR [.debug_info]:</span><br><span class="line">OFFSET   TYPE              VALUE</span><br><span class="line">00000006 R_386_32          .debug_abbrev</span><br><span class="line">0000000c R_386_32          .debug_str</span><br><span class="line">00000015 R_386_32          .debug_str</span><br><span class="line">00000019 R_386_32          .text</span><br><span class="line">0000001d R_386_32          .text</span><br><span class="line">00000021 R_386_32          .debug_line</span><br><span class="line">00000027 R_386_32          .debug_str</span><br><span class="line">00000031 R_386_32          .text</span><br><span class="line">00000035 R_386_32          .text</span><br><span class="line">0000004d R_386_32          .debug_str</span><br><span class="line">00000063 R_386_32          .debug_str</span><br><span class="line">00000070 R_386_32          .debug_str</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RELOCATION RECORDS FOR [.debug_line]:</span><br><span class="line">OFFSET   TYPE              VALUE</span><br><span class="line">00000027 R_386_32          .text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RELOCATION RECORDS FOR [.debug_pubnames]:</span><br><span class="line">OFFSET   TYPE              VALUE</span><br><span class="line">00000006 R_386_32          .debug_info</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RELOCATION RECORDS FOR [.debug_aranges]:</span><br><span class="line">OFFSET   TYPE              VALUE</span><br><span class="line">00000006 R_386_32          .debug_info</span><br><span class="line">00000010 R_386_32          .text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RELOCATION RECORDS FOR [.debug_frame]:</span><br><span class="line">OFFSET   TYPE              VALUE</span><br><span class="line">00000018 R_386_32          .debug_frame</span><br><span class="line">0000001c R_386_32          .text</span><br><span class="line">----------------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">-R</span><br><span class="line">--dynamic-reloc</span><br><span class="line">显示动态重定位的入口</span><br><span class="line"></span><br><span class="line">&gt; objdump -R /lib/ld-2.12.so</span><br><span class="line">---------------------</span><br><span class="line">/lib/ld-2.12.so:     file format elf32-i386</span><br><span class="line"></span><br><span class="line">DYNAMIC RELOCATION RECORDS</span><br><span class="line">OFFSET   TYPE              VALUE</span><br><span class="line">0001fe08 R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe14 R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe18 R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe1c R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe20 R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe24 R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe28 R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe2c R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe30 R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe34 R_386_RELATIVE    *ABS*</span><br><span class="line">0001fe38 R_386_RELATIVE    *ABS*</span><br><span class="line">0001ffe8 R_386_RELATIVE    *ABS*</span><br><span class="line">0001fff4 R_386_RELATIVE    *ABS*</span><br><span class="line">00020834 R_386_RELATIVE    *ABS*</span><br><span class="line">0001ffec R_386_GLOB_DAT    __libc_enable_secure</span><br><span class="line">0001fff0 R_386_GLOB_DAT    _r_debug</span><br><span class="line">0001fff8 R_386_GLOB_DAT    free</span><br><span class="line">0001ffd0 R_386_JUMP_SLOT   __libc_memalign</span><br><span class="line">0001ffd4 R_386_JUMP_SLOT   malloc</span><br><span class="line">0001ffd8 R_386_JUMP_SLOT   calloc</span><br><span class="line">0001ffdc R_386_JUMP_SLOT   realloc</span><br><span class="line">0001ffe0 R_386_JUMP_SLOT   ___tls_get_addr</span><br><span class="line">0001ffe4 R_386_JUMP_SLOT   free</span><br><span class="line">---------------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@file</span><br><span class="line">从文件中读取选项</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-v</span><br><span class="line">--version</span><br><span class="line">显示程序的版本号</span><br><span class="line"></span><br><span class="line">&gt; objdump -v</span><br><span class="line">--------------------</span><br><span class="line">GNU objdump version 2.20.51.0.2-5.48.el6 20100205</span><br><span class="line">Copyright 2009 Free Software Foundation, Inc.</span><br><span class="line">This program is free software; you may redistribute it under the terms of</span><br><span class="line">the GNU General Public License version 3 or (at your option) any later version.</span><br><span class="line">This program has absolutely no warranty.</span><br><span class="line">---------------------</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">-i</span><br><span class="line">--info</span><br><span class="line">列出支持的目标格式和架构</span><br><span class="line"></span><br><span class="line">&gt; objdump -i</span><br><span class="line">---------------------</span><br><span class="line">BFD header file version version 2.20.51.0.2-5.48.el6 20100205</span><br><span class="line">elf32-i386</span><br><span class="line"> (header little endian, data little endian)</span><br><span class="line">  i386</span><br><span class="line">a.out-i386-linux</span><br><span class="line"> (header little endian, data little endian)</span><br><span class="line">  i386</span><br><span class="line">pei-i386</span><br><span class="line"> (header little endian, data little endian)</span><br><span class="line">  i386</span><br><span class="line">elf64-x86-64</span><br><span class="line"> (header little endian, data little endian)</span><br><span class="line">  i386</span><br><span class="line">elf64-l1om</span><br><span class="line"> (header little endian, data little endian)</span><br><span class="line">  l1om</span><br><span class="line">elf64-little</span><br><span class="line"> (header little endian, data little endian)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">elf64-big</span><br><span class="line"> (header big endian, data big endian)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">elf32-little</span><br><span class="line"> (header little endian, data little endian)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">elf32-big</span><br><span class="line"> (header big endian, data big endian)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">srec</span><br><span class="line"> (header endianness unknown, data endianness unknown)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">symbolsrec</span><br><span class="line"> (header endianness unknown, data endianness unknown)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">verilog</span><br><span class="line"> (header endianness unknown, data endianness unknown)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">tekhex</span><br><span class="line"> (header endianness unknown, data endianness unknown)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">binary</span><br><span class="line"> (header endianness unknown, data endianness unknown)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">ihex</span><br><span class="line"> (header endianness unknown, data endianness unknown)</span><br><span class="line">  i386</span><br><span class="line">  l1om</span><br><span class="line">trad-core</span><br><span class="line"> (header endianness unknown, data endianness unknown)</span><br><span class="line"></span><br><span class="line">               elf32-i386 a.out-i386-linux pei-i386 elf64-x86-64 elf64-l1om</span><br><span class="line">          i386 elf32-i386 a.out-i386-linux pei-i386 elf64-x86-64 ----------</span><br><span class="line">          l1om ---------- ---------------- -------- ------------ elf64-l1om</span><br><span class="line"></span><br><span class="line">               elf64-little elf64-big elf32-little elf32-big srec symbolsrec</span><br><span class="line">          i386 elf64-little elf64-big elf32-little elf32-big srec symbolsrec</span><br><span class="line">          l1om elf64-little elf64-big elf32-little elf32-big srec symbolsrec</span><br><span class="line"></span><br><span class="line">               verilog tekhex binary ihex trad-core</span><br><span class="line">          i386 verilog tekhex binary ihex ---------</span><br><span class="line">          l1om verilog tekhex binary ihex ---------</span><br><span class="line">---------------------</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://threebearsdan.github.io/2019/06/26/代码段和数据段为什么分开存放？/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cruise">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一代人终将老去，总有人正年轻。">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/06/26/代码段和数据段为什么分开存放？/" itemprop="url">代码段和数据段为什么分开存放？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-06-26T16:43:51+08:00">
                2019-06-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><p>当程序被装载后，数据和指令分别被映射到两个虚存区域。数据区域对进程来说是可读写的，而指令区域对进程来说是只读的，所以这两个虚存区域的权限可以被分别设置成可读写和只读。这样可以防止程序的指令被有意或无意的改写。</p>
</li>
<li><p>对于现代的CPU来说，它们有着极为强大的缓存体系。由于缓存在现代计算机中的地位非常重要，所以必须尽量提高缓存的命中率。指令区和数据区的分离有利于提高程序的局部性。现代CPU的缓存一般都被设计成数据缓存和指令缓存你分离，所以程序的指令和数据被分开存对CPU的缓存命中率提高有好处。</p>
</li>
<li><p>最重要的原因就是当系统中运行多个该程序的副本时，它们的指令都是一样的，所以内存中只需要保存一份改程序的指令部分。对于指令这种只读的区域来说时这样，对于其他的只读数据也一样，比如很多程序里面带有的图标，图片，文本等资源也是属于可共享的。当然每个副本进程的数据区域时不一样的。它们时进程私有的。不要小看这个共享指令的概念，它在现代操作系统里面占了极其重要的地位，特别时在有动态链接库的系统中，可以节省大量的内存。</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Cruise</p>
              <p class="site-description motion-element" itemprop="description">记录岁月。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cruise</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  








  












  





  

  

  

  
  

  

  

  

</body>
</html>
